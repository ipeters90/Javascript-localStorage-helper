/**
 * An HTML5 LocalStorage helper library. 
 * https://github.com/ipeters90/javascript-localstorage-helper/
 * 
 * @author Ike Peters
 */

!function(t){"use strict";!function(){var e;try{localStorage.setItem("testing","testing value"),localStorage.removeItem("testing"),e=!0}catch(n){e=!1}e||(t.localStorage={getItem:function(t){return t&&this.hasOwnProperty(t)?unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)"+escape(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1")):null},key:function(t){return unescape(document.cookie.replace(/\s*\=(?:.(?!;))*$/,"").split(/\s*\=(?:[^;](?!;))*[^;]?;\s*/)[t])},setItem:function(t,e){t&&(document.cookie=escape(t)+"="+escape(e)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/",this.length=document.cookie.match(/\=/g).length)},length:0,removeItem:function(t){t&&this.hasOwnProperty(t)&&(document.cookie=escape(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/",this.length--)},hasOwnProperty:function(t){return new RegExp("(?:^|;\\s*)"+escape(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)}},t.localStorage.length=(document.cookie.match(/\=/g)||t.localStorage).length)}();var e=t.localStorage,n=function(){};n.prototype.get=function(t){var n,r=null;try{n=JSON.parse(e.getItem(t))}catch(o){n=e.getItem(t)}if(1===arguments.length)return n;if(!(2===arguments.length&&arguments[1]instanceof Function))throw"Improper arguments";(r=arguments[1])(n)},n.prototype.set=function(t,n,r){var o,u=null,a=(new Date).getTime()+1e3*r;return e.setItem(t,JSON.stringify(n),a),o=this.get(t),4===arguments.length&&arguments[3]instanceof Function?void(u=arguments[3])(o):o},n.prototype.remove=function(t){var n=null;2===arguments.length&&arguments[1]instanceof Function&&(n=arguments[1]);try{if(t in e){if(e.removeItem(t),null===n)return t;n(t)}}catch(r){throw r}},n.prototype.setProperty=function(t,n,r,o){var u=this.get(t),a=null,s=(new Date).getTime()+1e3*o;if("object"==typeof u&&null!==u)u[n]=r,e.setItem(t,JSON.stringify(u),s);else{if(void 0!==u)throw"Not an object";var g={};g[n]=r,this.set(t,g,s)}if(5===arguments.length&&arguments[4]instanceof Function)a=arguments[4];else if(4==arguments.length&&arguments[3]instanceof Function)a=arguments[3];else if(arguments.length<3)throw"Improper amount of arguments"},n.prototype.clear=function(){var t=null,n=e.length;return e.clear(),1===arguments.length&&arguments[0]instanceof Function?void(t=arguments[0])(n):n},n.prototype.getAll=function(){for(var t=null,n=[],r=0,o=e.length;o>r;r++)n.push(this.get(e.key(r)));var u=n.length?n:null;return 1===arguments.length&&arguments[0]instanceof Function?void(t=arguments[0])(u):u},n.prototype.size=function(){var t=this.getAll().length,e=null;return 1===arguments.length&&arguments[0]instanceof Function?void(e=arguments[0])(t):t},n.prototype.has=function(t){var e=null!==this.get(t),n=null;return 2===arguments.length&&arguments[1]instanceof Function?void(n=arguments[1])(e):e},n.prototype.setBulk=function(t,e){var n,r=null,o=Object.keys(t),u=o.length;for(n=0;u>n;n++)this.set(o[n],t[o[n]],e);if(3===arguments.length&&arguments[2]instanceof Function)(r=arguments[2])();else if(2===arguments.length&&arguments[1]instanceof Function)(r=arguments[1])();else if(arguments.length<1)throw"Improper amount of arguments"},n.prototype.isEmpty=function(){var t=0===this.size(),e=null;return 1===arguments.length&&arguments[0]instanceof Function?void(e=arguments[0])(t):t},n.prototype.getKeys=function(){var t,n=[],r=e.length,o=null;for(t=0;r>t;t++)n.push(e.key(t));return 1===arguments.length&&arguments[0]instanceof Function?void(o=arguments[0])(n):n},n.prototype.toObject=function(){var t,e={},n=this.getKeys(),r=n.length,o=null;for(t=0;r>t;t++)e[n[t]]=this.get(n[t]);return 1===arguments.length&&arguments[0]instanceof Function?void(o=arguments[0])(e):e},t.StorageManager||(t.StorageManager=n)}(window);