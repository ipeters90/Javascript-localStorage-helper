/**
 * An HTML5 LocalStorage helper library. 
 * https://github.com/ipeters90/javascript-localstorage-helper/
 * 
 * @author Ike Peters
 */

!function(e){"use strict";!function(){var t;try{localStorage.setItem("testing","testing value"),localStorage.removeItem("testing"),t=!0}catch(o){t=!1}t||(e.localStorage={getItem:function(e){return e&&this.hasOwnProperty(e)?unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1")):null},key:function(e){return unescape(document.cookie.replace(/\s*\=(?:.(?!;))*$/,"").split(/\s*\=(?:[^;](?!;))*[^;]?;\s*/)[e])},setItem:function(e,t){e&&(document.cookie=escape(e)+"="+escape(t)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/",this.length=document.cookie.match(/\=/g).length)},length:0,removeItem:function(e){e&&this.hasOwnProperty(e)&&(document.cookie=escape(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/",this.length--)},hasOwnProperty:function(e){return new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)}},e.localStorage.length=(document.cookie.match(/\=/g)||e.localStorage).length)}();var t=e.localStorage,o=function(){};o.prototype.get=function(e){var o;try{o=JSON.parse(t.getItem(e))}catch(n){o=t.getItem(e)}return o},o.prototype.set=function(e,o,n){var r=(new Date).getTime()+1e3*n;return t.setItem(e,JSON.stringify(o),r),this.get(e)},o.prototype.remove=function(e){e in t&&t.removeItem(e);var o=this.get(e);return void 0===o||null===o},o.prototype.setProperty=function(e,o,n,r){var c=this.get(e),i=(new Date).getTime()+1e3*r;if("object"==typeof c&&null!==c)c[o]=n,t.setItem(e,JSON.stringify(c),i);else{if(void 0!==c)throw"Not an object";var s={};s[o]=n,this.set(e,s,i)}},o.prototype.clear=function(){var e=t.length;return t.clear(),e},o.prototype.getAll=function(){for(var e=[],o=0,n=t.length;n>o;o++)e.push(this.get(t.key(o)));return e.length?e:null},o.prototype.size=function(){return this.getAll().length},o.prototype.has=function(e){return null!==this.get(e)},o.prototype.setBulk=function(e,t){var o,n=Object.keys(e),r=n.length;for(o=0;r>o;o++)this.set(n[o],e[n[o]],t)},o.prototype.isEmpty=function(){return 0===this.size()},o.prototype.getKeys=function(){var e,o=[],n=t.length;for(e=0;n>e;e++)o.push(t.key(e));return o},o.prototype.toObject=function(){var e,t={},o=this.getKeys(),n=o.length;for(e=0;n>e;e++)t[o[e]]=this.get(o[e]);return t},e.StorageManager||(e.StorageManager=o)}(window);